---
title: SDK Configuration Reference
description: Understand every block in an Atlas SDK YAML file so you can tailor the orchestrator to your agents.
sidebarTitle: Configuration
icon: settings
---

Atlas SDK configs are the control tower for runtime orchestration. Each block in the YAML tells the Student, Teacher, and Reward System how to behave. Start with `configs/examples/openai_agent.yaml`, then explore the other templates (`http_agent.yaml`, `python_agent.yaml`) to match your deployment.

<Tip>
Run orchestration with `atlas.core.run(..., stream_progress=True)` to mirror every event in the terminal. The streamer depends on these same configuration blocks, so what you see in the console matches what persists to storage.
</Tip>

<Note>
All examples reference files in the Atlas SDK repo (`configs/examples/`). If you cloned the repo for the quickstart, you already have them.
</Note>


## Layout at a Glance

```yaml
agent:        # How to talk to your underlying model or service
student:      # Planner, executor, and synthesizer prompts/limits
teacher:      # Reviewer and validator settings
orchestration:# Runtime policies like retries and timeouts
rim:          # Defines the Reward System (judges, arbiter, thresholds)
storage:      # (Optional) Postgres connection for trace persistence
metadata:     # (Optional) Custom key-value tags persisted with each session
```

Each section is restrictive by design—unexpected keys raise validation errors—so it’s easier to debug mistakes before the orchestrator spins up.

## Agent Configuration (`agent`)

This block defines how the orchestrator communicates with your agent.

| Adapter | Best for | Key fields |
|---------|----------|------------|
| `openai` | OpenAI or Azure OpenAI chat models | `llm` block (model, key env var, temperature, token limits) |
| `http_api` | Remote services behind an HTTP interface | `transport` (base URL, retry policy), `payload_template`, `result_path` |
| `python` | Local Python functions or callables | `import_path`, `attribute`, `working_directory`, optional `llm` metadata |

### OpenAI Adapter Example
```yaml
agent:
  type: openai
  name: sdk-quickstart-openai
  system_prompt: |
    You are the Atlas Student. Be concise and thorough.
  tools: []
  llm:
    provider: openai
    model: gpt-4o-mini
    api_key_env: OPENAI_API_KEY
    temperature: 0.0
    max_output_tokens: 768
```
<Tip>
Any non-OpenAI-compatible API (like Anthropic Claude) should use the `http_api` adapter until a dedicated integration is available.
</Tip>

See [`Bring Your Own Agent`](/sdk/adapters) for full walkthroughs of all three adapters.

## Student Configuration (`student`)

The Student block shapes planning, execution, and synthesis.

```yaml
student:
  prompts:
    planner: |
      {base_prompt}
      Draft a numbered plan as JSON.
    executor: |
      {base_prompt}
      Execute the step, showing intermediate reasoning.
    synthesizer: |
      {base_prompt}
      Combine results into the final answer.
  max_plan_tokens: 1024
  max_step_tokens: 1024
  max_synthesis_tokens: 1024
  tool_choice: auto
```

- **Prompts**: Templates that receive `{base_prompt}` from the agent’s system prompt. Atlas also ships opinionated defaults in `atlas.prompts.build_student_prompts`; override them by supplying explicit prompt strings, tweaking the base prompt, or calling the helper yourself.
- **Token limits**: Guardrails for LLM calls; increase them when steps are truncated.
- **`tool_choice`**: `auto` lets the Student call registered tools. Use `required` to force a tool call on every step.

## Teacher Configuration (`teacher`)

The Teacher reviews plans, validates outputs, and provides guidance.

```yaml
teacher:
  llm:
    provider: openai
    model: gpt-4o-mini
    api_key_env: OPENAI_API_KEY
    temperature: 0.1
    max_output_tokens: 768
  max_review_tokens: 1024
  plan_cache_seconds: 300
  guidance_max_tokens: 256
  validation_max_tokens: 256
```

- **LLM block**: Often mirrors the Student’s provider but can be a more powerful model for complex reviews.
- **`plan_cache_seconds`**: Caches an approved plan for a given task ID to avoid re-running reviews.
- **Guidance/validation caps**: Keep feedback concise; increase when you expect lengthy traces.
- **Prompts**: Teacher defaults come from `atlas.prompts.build_teacher_prompts`; override the prompts block to match your review style.

## Orchestration (`orchestration`)

These policies govern the runtime loop.

```yaml
orchestration:
  max_retries: 1
  step_timeout_seconds: 600
  rim_guidance_tag: rim_feedback
  emit_intermediate_steps: true
```

- **`max_retries`**: Default (and maximum) is 1. The orchestrator never retries the same step more than once.
- **`step_timeout_seconds`**: Per-step timeout; extend when calling slow tools or external APIs.
- **`rim_guidance_tag`**: The tag used to inject feedback from the Reward System back into prompts.
- **`emit_intermediate_steps`**: Keep `true` to stream events for logging and telemetry. Combine this with `stream_progress=True` in `atlas.core.run` to see the Teacher/Student loop live.

## Reward System (the `rim` block)

The Reward System scores each attempt so the orchestrator knows whether to accept an answer or trigger a retry. The YAML block is named `rim` for compatibility with the core training engine.

```yaml
rim:
  small_model:
    provider: openai
    model: gpt-4o-mini
    api_key_env: OPENAI_API_KEY
    max_output_tokens: 512
  large_model:
    provider: openai
    model: gpt-4o
    api_key_env: OPENAI_API_KEY
    max_output_tokens: 768
  active_judges:
    process: true
    helpfulness: true
  variance_threshold: 0.15
  uncertainty_threshold: 0.3
  parallel_workers: 4
```

- **Judge toggles**: Enable or disable built-in judges through `active_judges`. Custom judges can be added by extending `atlas.evaluation.judges`.
- **Escalation models**: `small_model` handles the fast path; `large_model` resolves disagreements when variance or uncertainty exceed the configured thresholds.
- **Retry behaviour**: The orchestrator retries when the aggregated score falls below `0.6` (built-in default). Adjust `max_retries` in the orchestration block to cap how many attempts are made.

Learn more in [`Reward Design`](/concepts/reward-design#reward-system-in-the-atlas-sdk).

## Storage (`storage`)

Optional Postgres persistence for traces and session metadata.

```yaml
storage:
  database_url: postgresql://localhost:5432/atlas
  min_connections: 1
  max_connections: 5
  statement_timeout_seconds: 30
```

Leave `storage: null` (as in the quickstart) when you don’t have a database. Enable it when you want durable telemetry or plan to export datasets with `arc-atlas --output traces.jsonl`.

## Persona prompts & guidance

Atlas derives persona text by combining the adapter’s `system_prompt` with helper templates in `atlas.prompts`. Customize behaviour by:

- Providing explicit strings under `student.prompts` and `teacher.prompts`.
- Adjusting the adapter’s base `system_prompt`.
- Calling `atlas.prompts.build_student_prompts` / `build_teacher_prompts` in your own tooling before handing prompts to the config.
- Supplying optional `prompt_guidance` dicts (per persona) when you need to inject structured hints that the runtime merges into prompts at execution time.

## Cheat Sheet

| Goal | Section to edit | Quick pointer |
|------|-----------------|---------------|
| Swap to Anthropic via HTTP | `agent` | Use the `http_api` adapter and point `transport.base_url` to your service. |
| Increase reasoning depth | `student` and `teacher` | Raise the `max_..._tokens` limits for the planner, executor, or guidance. | 
| Persist sessions | `storage` | Provide a reachable Postgres URL and credentials. |
| Tighten the quality bar | `rim` | Lower `variance_threshold` / `uncertainty_threshold` or disable lenient judges in `active_judges`. |
| Personalize prompts | `student.prompts` / `teacher.prompts` | Override the templates directly or use `atlas.prompts` helpers. |

## Next Steps

- Walk through the runtime loop in [`How Orchestration Works`](/sdk/orchestration).
- Choose the right connector in [`Bring Your Own Agent`](/sdk/adapters).
- See how runtime roles compare to training in [`Student & Teacher Roles`](/sdk/student-teacher-roles).
